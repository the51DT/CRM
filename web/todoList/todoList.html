<!DOCTYPE html>
<html lang="en">
  <div data-include-path="/fragments/head.html"></div>
  <body>
    <div id="root">
      <!-- header include -->
      <header id="header">
        <div data-include-path="/fragments/header.html"></div>
      </header>
      <!-- container -->
      <div id="container">
        <!-- lnb include -->
        <nav id="lnb">
          <div data-include-path="/fragments/lnb.html"></div>
        </nav>
        <!-- contents -->
        <div id="contents">
          <div class="contents__inner">
            <h2>오늘의 할 일</h2>

            <section class="row">
              <div class="search-box">
                <div class="col-auto label">
                  <label class="col-form-label">조회 조직</label>
                </div>
                <div class="col-auto">
                  <div class="relative">
                    <button
                      class="btn btn-select-search"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseSearch"
                      aria-expanded="false"
                      aria-controls="collapseSearch"
                      id="GroupText"
                    >
                      <span th:if="${userRole == 'Master' or userRole == 'AllManage'}">조회 조직을 선택해 주세요</span>
                      <span th:if="${userRole == 'FieldManage' or userRole == 'User'}" th:text="${bizbrNm}"></span>
                    </button>
                    <div class="collapse layer-collapse" id="collapseSearch">
                      <div class="title">조회 조직을 선택해 주세요.</div>
                      <div class="jstree uiscroll">
                        <ul th:if="${userRole == 'Master' or userRole == 'AllManage'}">
                          <li>
                            전체조직
                            <ul>
                              <li th:each="group1, depth1Stat : ${groupList}" th:if="${group1.bizbrLvl == '5'}">
                                <th:block th:text="${group1.bizbrNm}"></th:block>
                                <ul>
                                  <li
                                    th:each="group2, depth2Stat : ${groupList}"
                                    th:if="${group2.bizbrLvl}=='6' and ${group1.bizbrCd} == ${group2.parentBizbrCd}"
                                  >
                                    <th:block th:text="${group2.bizbrNm}"></th:block>
                                    <ul>
                                      <li
                                        th:each="group3, depth3Stat : ${groupList}"
                                        th:if="${group3.bizbrLvl}=='7' and ${group2.bizbrCd} == ${group3.parentBizbrCd}"
                                      >
                                        <th:block th:text="${group3.bizbrNm}"></th:block>
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </li>
                        </ul>
                        <ul th:if="${userRole == 'FieldManage' or userRole == 'User'}">
                          <li th:each="group1, depth1Stat : ${groupList}" th:if="${group1.bizbrLvl == '5'}">
                            <th:block th:text="${group1.bizbrNm}"></th:block>
                            <ul>
                              <li th:each="group2, depth2Stat : ${groupList}" th:if="${group2.bizbrLvl}=='6' and ${group1.bizbrCd} == ${group2.parentBizbrCd}">
                                <th:block th:text="${group2.bizbrNm}"></th:block>
                                <ul>
                                  <li
                                    th:each="group3, depth3Stat : ${groupList}"
                                    th:if="${group3.bizbrLvl}=='7' and ${group2.bizbrCd} == ${group3.parentBizbrCd}"
                                  >
                                    <th:block th:text="${group3.bizbrNm}"></th:block>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </li>
                          <!-- 5레벨이 없고 6레벨이 바로 존재할 경우 -->
                          <li th:each="group2, depth2Stat : ${groupList}" th:if="${group2.bizbrLvl}=='6' and ${#lists.isEmpty(groupList.?[bizbrLvl == '5'])}">
                            <th:block th:text="${group2.bizbrNm}"></th:block>
                            <ul>
                              <!-- 7레벨이 존재할 경우 -->
                              <li th:each="group3, depth3Stat : ${groupList}" th:if="${group3.bizbrLvl}=='7' and ${group2.bizbrCd} == ${group3.parentBizbrCd}">
                                <th:block th:text="${group3.bizbrNm}"></th:block>
                              </li>
                            </ul>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-auto" th:if="${userRole != 'User'}">
                  <button type="button" id="groupSeach" class="btn btn-dark btn-sm">조회</button>
                </div>
              </div>
            </section>

            <section class="row">
              <div class="data-info-box">
                <div class="col-auto label">
                  <label>인입 현황</label>
                </div>
                <div class="col-auto">
                  <dl>
                    <dt>해지 고위험</dt>
                    <dd id="highRiskCount">0</dd>
                  </dl>
                </div>
                <div class="col-auto">
                  <dl>
                    <dt>중복 장애</dt>
                    <dd id="duplicationCount">0</dd>
                  </dl>
                </div>
                <div class="col-auto">
                  <dl>
                    <dt>표출 불만</dt>
                    <dd id="expressedComplaintCount">0</dd>
                  </dl>
                </div>
                <div class="col-auto">
                  <dl>
                    <dt>잠재 불만</dt>
                    <dd id="potentialComplaintCount">0</dd>
                  </dl>
                </div>
                <div class="col-auto right">
                  <span class="date" id="currentDate">2025-06-04 13:22:19</span>
                  <button type="button" class="btn btn-ico btn-refresh">
                    <span class="is-blind">새로고침</span>
                  </button>
                </div>
              </div>
            </section>

            <!-- 2025-05 신규 수정/추가 -->
            <section class="row">
              <table class="dataTable row-border hover" id="pubTable1">
                <thead>
                  <tr>
                    <th>기준일</th>
                    <th>가입 번호</th>
                    <th>대리점 코드</th>
                    <th>대리점명</th>
                    <th>서비스</th>
                    <th>발생 지표</th>
                    <th>고객 유형</th>
                    <th>Care 활동</th>
                    <th>중복 발생</th>
                    <th>결과 등록</th>
                    <th>등록 기한</th>
                    <th>조회</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>2024-03-25</td>
                    <td>5000123122</td>
                    <td>22233344</td>
                    <td>김포(협동조합)</td>
                    <td>인터넷</td>
                    <td>60일 내 3회 중복 장애</td>
                    <td>중복 장애</td>
                    <td>Ai Task 발행</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>2024-04-02</td>
                    <td>
                      <!-- 작은 버튼 임시 -->
                      <div class="col-auto d-flex justify-content-center gap-2">
                        <button type="button" class="btn btn-outline-dark">유선 CEM</button>
                        <button type="button" class="btn btn-dark" disabled>컨택 등록</button>
                        <button type="button" class="btn btn-dark" disabled>결과 등록</button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>2024-03-25</td>
                    <td>5000123122</td>
                    <td>22233344</td>
                    <td>김포(협동조합)</td>
                    <td>인터넷</td>
                    <td>60일 내 3회 중복 장애</td>
                    <td>중복 장애</td>
                    <td>Ai Task 발행</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>2024-04-02</td>
                    <td>
                      <!-- 작은 버튼 임시 -->
                      <div class="col-auto d-flex justify-content-center gap-2">
                        <button type="button" class="btn btn-outline-dark">유선 CEM</button>
                        <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#contactRegister">컨택 등록</button>
                        <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#resultRegister">결과 등록</button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>2024-03-25</td>
                    <td>5000123122</td>
                    <td>22233344</td>
                    <td>김포(협동조합)</td>
                    <td>인터넷</td>
                    <td>60일 내 3회 중복 장애</td>
                    <td>중복 장애</td>
                    <td>Ai Task 발행</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>2024-04-02</td>
                    <td>
                      <!-- 작은 버튼 임시 -->
                      <div class="col-auto d-flex justify-content-center gap-2">
                        <button type="button" class="btn btn-outline-dark">유선 CEM</button>
                        <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#contactView">컨택 조회</button>
                        <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#resultView">결과 조회</button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <!-- // 2025-05 신규 수정/추가 -->

            <!-- 컨택 등록 모달 -->
            <div
              class="modal fade"
              id="contactRegister"
              tabindex="-1"
              aria-labelledby="contactRegisterLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable modal-xlg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="contactRegisterLabel">컨택 등록</h1>
                    <section class="row">
                      <div class="trigger-box">
                        <button type="button" class="btn btn-ico btn-search-list" data-bs-toggle="modal" data-bs-target="#processHistory">
                          중간 처리 이력
                        </button>
                        <button type="button" class="btn btn-ico btn-sms-send" data-bs-toggle="modal" data-bs-target="#smsSend">SMS 발송</button>
                        <button type="button" class="btn btn-ico btn-receipt" data-bs-toggle="modal" data-bs-target="#asPublish">AS 발행</button>
                      </div>
                      <table class="form-table">
                        <colgroup>
                          <col style="width: 140px" />
                          <col />
                        </colgroup>
                        <tbody>
                          <tr>
                            <th>Care 활동</th>
                            <td>
                              <select class="w300 uiscroll" aria-label="서비스 선택">
                                <option value="">Care 활동을 선택해 주세요</option>
                                <option value="">AI TASK</option>
                                <option value="">상담톡</option>
                                <option value="">클린콜</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>유선 CEM 이상 유무</th>
                            <td id="cemAbnormal">
                              <span class="custom-radio">
                                <input id="cemAbnormalRadioY" name="cemAbnormalRadio" type="radio" value="Y" checked />
                                <label for="cemAbnormalRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="cemAbnormalRadioN" name="cemAbnormalRadio" type="radio" value="N" />
                                <label for="cemAbnormalRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>마지막 컨택일</th>
                            <td>
                              <div class="row">
                                <div class="col-auto">
                                  <div class="date-picker-group w200">
                                    <div class="start-date1 input-group datepicker w-auto" data-target-input="nearest">
                                      <input
                                        type="text"
                                        class="form-control datetimepicker-input"
                                        data-target=".start-date1"
                                        placeholder="날짜"
                                        id="lastContactDateInput"
                                        name="lastContactDate"
                                      />
                                      <div class="input-group-append" data-target=".start-date1" data-toggle="datetimepicker">
                                        <button class="input-group-text">
                                          <img src="/assets/images/common/icon_datepicker.png" alt="달력 이미지" />
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-auto visitHourInput">
                                  <select class="w-auto uiscroll" aria-label="시간 선택">
                                    <option value="0">0시</option>
                                    <option value="1">1시</option>
                                    <option value="2">2시</option>
                                    <option value="3">3시</option>
                                    <option value="4">4시</option>
                                    <option value="5">5시</option>
                                    <option value="6">6시</option>
                                    <option value="7">7시</option>
                                    <option value="8">8시</option>
                                    <option value="9">9시</option>
                                    <option value="10">10시</option>
                                    <option value="11">11시</option>
                                    <option value="12">12시</option>
                                    <option value="13">13시</option>
                                    <option value="14">14시</option>
                                    <option value="15">15시</option>
                                    <option value="16">16시</option>
                                    <option value="17">17시</option>
                                    <option value="18">18시</option>
                                    <option value="19">19시</option>
                                    <option value="20">20시</option>
                                    <option value="21">21시</option>
                                    <option value="22">22시</option>
                                    <option value="23">23시</option>
                                  </select>
                                </div>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>컨택 방법</th>
                            <td>
                              <select class="w300 uiscroll" aria-label="서비스 선택">
                                <option value="">컨택 방법을 선택해 주세요</option>
                                <option value="">전화</option>
                                <option value="">SMS</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>고객 연결 여부</th>
                            <td id="customerConnect">
                              <span class="custom-radio">
                                <input id="customerConnectRadioY" name="customerConnectRadio" type="radio" value="Y" checked />
                                <label for="customerConnectRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="customerConnectRadioN" name="customerConnectRadio" type="radio" value="N" />
                                <label for="customerConnectRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>고객 장애 인지</th>
                            <td id="faultAwareness">
                              <span class="custom-radio">
                                <input id="faultAwarenessRadioY" name="faultAwarenessRadio" type="radio" value="Y" checked />
                                <label for="faultAwarenessRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="faultAwarenessRadioN" name="faultAwarenessRadio" type="radio" value="N" />
                                <label for="faultAwarenessRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>고객 장애 상세</th>
                            <td>
                              <select class="w300 uiscroll" aria-label="서비스 선택">
                                <option value="">고객 장애 상세를 선택해 주세요</option>
                                <option value="">화면 깨짐</option>
                                <option value="">화면 끊김</option>
                                <option value="">기타</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>추가 방문 요청</th>
                            <td id="additionalVisitRequest">
                              <span class="custom-radio">
                                <input id="additionalVisitRequestRadioY" name="additionalVisitRequestRadio" type="radio" value="Y" checked />
                                <label for="additionalVisitRequestRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="additionalVisitRequestRadioN" name="additionalVisitRequestRadio" type="radio" value="N" />
                                <label for="additionalVisitRequestRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>미방문 사유</th>
                            <td>
                              <div class="input-form w300">
                                <input type="text" id="noVisitReasonInput" name="noVisitReason" placeholder="미방문 사유를 입력해 주세요" value="" />
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>방문 예정일</th>
                            <td>
                              <div class="row">
                                <div class="col-auto">
                                  <div class="date-picker-group w200">
                                    <div class="start-date2 input-group datepicker w-auto" data-target-input="nearest">
                                      <input
                                        type="text"
                                        class="form-control datetimepicker-input"
                                        data-target=".start-date2"
                                        placeholder="날짜"
                                        id="visitPlanDateInput"
                                        name="visitPlanDate"
                                      />
                                      <div class="input-group-append" data-target=".start-date2" data-toggle="datetimepicker">
                                        <button class="input-group-text">
                                          <img src="/assets/images/common/icon_datepicker.png" alt="달력 이미지" />
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-auto visitHourInput">
                                  <select class="w-auto uiscroll" aria-label="시간 선택">
                                    <option value="0">0시</option>
                                    <option value="1">1시</option>
                                    <option value="2">2시</option>
                                    <option value="3">3시</option>
                                    <option value="4">4시</option>
                                    <option value="5">5시</option>
                                    <option value="6">6시</option>
                                    <option value="7">7시</option>
                                    <option value="8">8시</option>
                                    <option value="9">9시</option>
                                    <option value="10">10시</option>
                                    <option value="11">11시</option>
                                    <option value="12">12시</option>
                                    <option value="13">13시</option>
                                    <option value="14">14시</option>
                                    <option value="15">15시</option>
                                    <option value="16">16시</option>
                                    <option value="17">17시</option>
                                    <option value="18">18시</option>
                                    <option value="19">19시</option>
                                    <option value="20">20시</option>
                                    <option value="21">21시</option>
                                    <option value="22">22시</option>
                                    <option value="23">23시</option>
                                  </select>
                                </div>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>컨택 메모</th>
                            <td>
                              <div class="d-flex gap-2">
                                <div class="col-9">
                                  <!-- error 경우 error 클래스 추가 -->
                                  <div class="input-form">
                                    <textarea id="contactMemo" name="contactMemo" placeholder="컨택 메모를 입력해 주세요" maxlength="500"></textarea>
                                    <div class="counter"><span class="current">0</span>/200</div>
                                  </div>
                                </div>
                                <div class="col-3">
                                  <button type="button" class="btn btn-dark" onclick="alertPubTest()">저장</button>
                                </div>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>컨택 메모 이력</th>
                            <td>
                              <ul class="memo-history">
                                <li>
                                  <span>2025-04-01 12:59</span>
                                  <strong>AS 발행</strong>
                                </li>
                                <li>
                                  <span>2025-04-01 12:59</span>
                                  <strong>AS 발행</strong>
                                </li>
                              </ul>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>
                  <div class="modal-footer">
                    <div class="d-flex gap-08">
                      <div class="col-auto">
                        <button type="button" class="btn btn-outline-dark NonRole">임시저장</button>
                      </div>
                      <div class="col">
                        <button type="button" class="btn btn-dark w100p updateBtn">확인</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // 컨택 등록 모달 -->

            <!-- 컨택 조회 모달 -->
            <div
              class="modal fade"
              id="contactView"
              tabindex="-1"
              aria-labelledby="contactViewLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable modal-xlg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="contactViewLabel">컨택 조회</h1>
                    <section class="row">
                      <div class="trigger-box">
                        <button type="button" class="btn btn-ico btn-search-list" data-bs-toggle="modal" data-bs-target="#processHistory">
                          중간 처리 이력
                        </button>
                        <button type="button" class="btn btn-ico btn-sms-send" onclick="alertPubTest2()">SMS 발송</button>
                        <button type="button" class="btn btn-ico btn-receipt" data-bs-toggle="modal" data-bs-target="#asPublish" disabled>AS 발행</button>
                      </div>
                      <table class="form-table">
                        <colgroup>
                          <col style="width: 140px" />
                          <col />
                        </colgroup>
                        <tbody>
                          <tr>
                            <th>Care 활동</th>
                            <td>상담톡</td>
                          </tr>
                          <tr>
                            <th>유선 CEM 이상 유무</th>
                            <td>Y</td>
                          </tr>
                          <tr>
                            <th>마지막 컨택일</th>
                            <td>2025-04-01 12:59</td>
                          </tr>
                          <tr>
                            <th>컨택 방법</th>
                            <td>전화</td>
                          </tr>
                          <tr>
                            <th>고객 연결 여부</th>
                            <td>Y</td>
                          </tr>
                          <tr>
                            <th>고객 장애 인지</th>
                            <td>Y</td>
                          </tr>
                          <tr>
                            <th>고객 장애 상세</th>
                            <td>화면 깨짐</td>
                          </tr>
                          <tr>
                            <th>추가 방문 요청</th>
                            <td>N</td>
                          </tr>
                          <tr>
                            <th>미방문 사유</th>
                            <td>고객 부재</td>
                          </tr>
                          <tr>
                            <th>방문 예정일</th>
                            <td>2025-04-01 12:59</td>
                          </tr>
                          <tr>
                            <th>컨택 메모</th>
                            <td>
                              <div class="d-flex gap-2">
                                <div class="col-9">
                                  <!-- error 경우 error 클래스 추가 -->
                                  <div class="input-form">
                                    <textarea id="contactMemoView" name="contactMemo" placeholder="컨택 메모를 입력해 주세요" maxlength="500"></textarea>
                                    <div class="counter"><span class="current">0</span>/200</div>
                                  </div>
                                </div>
                                <div class="col-3">
                                  <button type="button" class="btn btn-dark" onclick="alertPubTest()">저장</button>
                                </div>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>컨택 메모 이력</th>
                            <td>
                              <ul class="memo-history">
                                <li>
                                  <span>2025-04-01 12:59</span>
                                  <strong>AS 발행</strong>
                                </li>
                                <li>
                                  <span>2025-04-01 12:59</span>
                                  <strong>AS 발행</strong>
                                </li>
                              </ul>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>
                  <div class="modal-footer notice-style">
                    <div class="d-grid">
                      <button type="button" class="btn" id="">확인</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // 컨택 조회 모달 -->

            <!-- 결과 등록 모달 -->
            <div
              class="modal fade"
              id="resultRegister"
              tabindex="-1"
              aria-labelledby="resultRegisterLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable modal-xlg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="resultRegisterLabel">결과 등록</h1>
                    <section class="row">
                      <table class="form-table">
                        <colgroup>
                          <col style="width: 140px" />
                          <col />
                        </colgroup>
                        <tbody>
                          <tr>
                            <th>Care 활동</th>
                            <td>
                              <select class="w300 uiscroll" aria-label="서비스 선택">
                                <option value="">Care 활동을 선택해 주세요</option>
                                <option value="">AI TASK</option>
                                <option value="">상담톡</option>
                                <option value="">클린콜</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>추가 방문 여부</th>
                            <td id="additionalVisitYn">
                              <span class="custom-radio">
                                <input id="additionalVisitYnRadioY" name="additionalVisitYnRadio" type="radio" value="Y" checked />
                                <label for="additionalVisitYnRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="additionalVisitYnRadioN" name="additionalVisitYnRadio" type="radio" value="N" />
                                <label for="additionalVisitYnRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>추가 방문 일자</th>
                            <td>
                              <div class="row">
                                <div class="col-auto">
                                  <div class="date-picker-group w200">
                                    <div class="start-date3 input-group datepicker w-auto" data-target-input="nearest">
                                      <input
                                        type="text"
                                        class="form-control datetimepicker-input"
                                        data-target=".start-date3"
                                        placeholder="날짜"
                                        id="additionalVisitDateInput"
                                        name="additionalVisitDate"
                                      />
                                      <div class="input-group-append" data-target=".start-date3" data-toggle="datetimepicker">
                                        <button class="input-group-text">
                                          <img src="/assets/images/common/icon_datepicker.png" alt="달력 이미지" />
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-auto visitHourInput">
                                  <select class="w-auto uiscroll" aria-label="시간 선택">
                                    <option value="0">0시</option>
                                    <option value="1">1시</option>
                                    <option value="2">2시</option>
                                    <option value="3">3시</option>
                                    <option value="4">4시</option>
                                    <option value="5">5시</option>
                                    <option value="6">6시</option>
                                    <option value="7">7시</option>
                                    <option value="8">8시</option>
                                    <option value="9">9시</option>
                                    <option value="10">10시</option>
                                    <option value="11">11시</option>
                                    <option value="12">12시</option>
                                    <option value="13">13시</option>
                                    <option value="14">14시</option>
                                    <option value="15">15시</option>
                                    <option value="16">16시</option>
                                    <option value="17">17시</option>
                                    <option value="18">18시</option>
                                    <option value="19">19시</option>
                                    <option value="20">20시</option>
                                    <option value="21">21시</option>
                                    <option value="22">22시</option>
                                    <option value="23">23시</option>
                                  </select>
                                </div>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>장애 증상 여부</th>
                            <td id="faultSymptom">
                              <span class="custom-radio">
                                <input id="faultSymptomRadioY" name="faultSymptomRadio" type="radio" value="Y" checked />
                                <label for="faultSymptomRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="faultSymptomRadioN" name="faultSymptomRadio" type="radio" value="N" />
                                <label for="faultSymptomRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>장애 증상 상세</th>
                            <td class="disabledN no-click">
                              <select class="w300 uiscroll" aria-label="장애 증상 상세 선택">
                                <option value="">고객 장애 상세를 선택해 주세요</option>
                                <option value="" selected>화면 깨짐</option>
                                <option value="">화면 끊김</option>
                                <option value="">기타</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>추가 방문 결과</th>
                            <td>
                              <select class="w300 uiscroll" aria-label="추가 방문 결과 선택">
                                <option value="">추가 방문 결과를 선택해 주세요</option>
                                <option value="">단말 및 부수 자재 교체</option>
                                <option value="">구내 배선 교체</option>
                                <option value="">댁내 배선 교체</option>
                                <option value="">NW 장애</option>
                                <option value="">사용법 설명</option>
                                <option value="">기타</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>구간 품질 측정</th>
                            <td id="sectionQuality">
                              <span class="custom-radio">
                                <input id="sectionQualityRadioY" name="sectionQualityRadio" type="radio" value="Y" checked />
                                <label for="sectionQualityRadioY" class="button">Y</label>
                              </span>
                              <span class="custom-radio">
                                <input id="sectionQualityRadioN" name="sectionQualityRadio" type="radio" value="N" />
                                <label for="sectionQualityRadioN" class="button">N</label>
                              </span>
                            </td>
                          </tr>
                          <tr>
                            <th>미방문 사유</th>
                            <td>
                              <select class="w300 uiscroll" aria-label="미방문 사유 선택">
                                <option value="">미방문 사유를 선택해 주세요</option>
                                <option value="">고객 부재</option>
                                <option value="">방문 거부</option>
                                <option value="">그 외</option>
                              </select>
                            </td>
                          </tr>
                          <tr>
                            <th>추가 방문 TASK 번호</th>
                            <td>
                              <div class="input-form w300">
                                <input type="text" id="taskNumberInput" name="taskNumber" placeholder="숫자만 입력해 주세요" value="" />
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>Care 상세 현황</th>
                            <td>
                              <!-- error 경우 error 클래스 추가 -->
                              <div class="input-form">
                                <textarea id="careDetailsInput" name="careDetails" placeholder="Care 상세 현황을 입력해 주세요" maxlength="500"></textarea>
                                <div class="counter"><span class="current">0</span>/500</div>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>특이사항</th>
                            <td>
                              <button type="button" class="btn btn-ico btn-add">추가</button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>
                  <div class="modal-footer">
                    <div class="d-flex gap-08">
                      <div class="col-auto">
                        <button type="button" class="btn btn-outline-dark NonRole">임시저장</button>
                      </div>
                      <div class="col">
                        <button type="button" class="btn btn-dark w100p updateBtn">확인</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // 결과 등록 모달 -->

            <!-- 결과 조회 모달 -->
            <div
              class="modal fade"
              id="resultView"
              tabindex="-1"
              aria-labelledby="resultViewLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable modal-xlg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="resultViewLabel">결과 조회</h1>
                    <section class="row">
                      <table class="form-table">
                        <colgroup>
                          <col style="width: 140px" />
                          <col />
                        </colgroup>
                        <tbody>
                          <tr>
                            <th>Care 활동</th>
                            <td>상담톡</td>
                          </tr>
                          <tr>
                            <th>추가 방문 여부</th>
                            <td>Y</td>
                          </tr>
                          <tr>
                            <th>추가 방문 일자</th>
                            <td>2025-04-01 12:59</td>
                          </tr>
                          <tr>
                            <th>장애 증상 여부</th>
                            <td>Y</td>
                          </tr>
                          <tr>
                            <th>장애 증상 상세</th>
                            <td>화면 깨짐</td>
                          </tr>
                          <tr>
                            <th>추가 방문 결과</th>
                            <td>단말 및 부수 자재 교체</td>
                          </tr>
                          <tr>
                            <th>구간 품질 측정</th>
                            <td>N</td>
                          </tr>
                          <tr>
                            <th>미방문 사유</th>
                            <td>고객 부재</td>
                          </tr>
                          <tr>
                            <th>추가 방문 TASK 번호</th>
                            <td>12345678910</td>
                          </tr>
                          <tr>
                            <th>Care 상세 현황</th>
                            <td>최근 한 달 내 2건의 동일 장애 발생으로 인한 무상 AS 진행 하였습니다.</td>
                          </tr>
                          <tr>
                            <th>특이사항</th>
                            <td>
                              <div id="hashGroup" class="hash-group-column">
                                <div class="hash">
                                  <span>#일이삼사오육칠팔구</span>
                                  <button type="button" class="btn-close"></button>
                                </div>
                                <div class="hash lavender">
                                  <span>#담배냄새민감</span>
                                  <button type="button" class="btn-close"></button>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>
                  <div class="modal-footer notice-style">
                    <div class="d-grid">
                      <button type="button" class="btn" id="">확인</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // 결과 조회 모달 -->

            <!-- 중간 처리 이력 모달 -->
            <div
              class="modal fade"
              id="processHistory"
              tabindex="-1"
              aria-labelledby="processHistoryLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable modal-xxlg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="processHistoryLabel">중간 처리 이력</h1>
                    <section class="row">
                      <table class="dataTable row-border hover clickable-row" id="pubTable2">
                        <thead>
                          <tr>
                            <th>택배/매</th>
                            <th>디스크 번호</th>
                            <th>디스크 구분</th>
                            <th>상태</th>
                            <th>작업명</th>
                            <th>상품명</th>
                            <th>서비스명</th>
                            <th>대리점명</th>
                            <th>담당기사</th>
                            <th>요청 일시</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>택배</td>
                            <td>123456789</td>
                            <td>가입자개통타스크</td>
                            <td>처리 중</td>
                            <td>상품 변경</td>
                            <td>스마트기가_1G</td>
                            <td>U+인터넷</td>
                            <td>복구_개통-A지점</td>
                            <td>홍길동</td>
                            <td>2025-05-02 13:50</td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>
                  <div class="modal-footer notice-style">
                    <div class="d-grid">
                      <button type="button" class="btn" id="">확인</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // 중간 처리 이력 모달 -->

            <!-- SMS 발송 모달 -->
            <div
              class="modal fade"
              id="smsSend"
              tabindex="-1"
              aria-labelledby="smsSendLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="smsSendLabel">SMS 발송</h1>
                    <section class="row">
                      <table class="form-table">
                        <colgroup>
                          <col style="width: 80px" />
                          <col />
                        </colgroup>
                        <tbody>
                          <tr>
                            <th>내용 입력</th>
                            <td>
                              <!-- error 경우 error 클래스 추가 -->
                              <div class="input-form">
                                <textarea id="smsContentInput" name="smsContent" placeholder="SMS 발송 내용을 입력해 주세요" maxlength="2000"></textarea>
                                <div class="counter"><span class="current">0</span>/2,000</div>
                              </div>

                              <!-- 특수문자 입력 영역 -->
                              <div class="sms-symbol-list">
                                <!-- 1줄 -->
                                <button class="symbol-btn">&#x00B1;</button>
                                <button class="symbol-btn">&#x2260;</button>
                                <button class="symbol-btn">&#x2264;</button>
                                <button class="symbol-btn">&#x2265;</button>
                                <button class="symbol-btn">&#x221E;</button>
                                <button class="symbol-btn">&#x2642;</button>
                                <button class="symbol-btn">&#x2640;</button>
                                <button class="symbol-btn">&#x221A;</button>
                                <button class="symbol-btn">&#x21D4;</button>
                                <button class="symbol-btn">&#x0025;</button>
                                <button class="symbol-btn">&#x0024;</button>
                                <button class="symbol-btn">&#x20A9;</button>
                                <button class="symbol-btn">&#x00A3;</button>
                                <button class="symbol-btn">&#x00A5;</button>
                                <!-- 2줄 -->
                                <button class="symbol-btn">&#x0040;</button>
                                <button class="symbol-btn">&#x0023;</button>
                                <button class="symbol-btn">&#x0026;</button>
                                <button class="symbol-btn">&#x203B;</button>
                                <button class="symbol-btn">&#x2732;</button>
                                <button class="symbol-btn">&#x2606;</button>
                                <button class="symbol-btn">&#x2605;</button>
                                <button class="symbol-btn">&#x25CB;</button>
                                <button class="symbol-btn">&#x25CF;</button>
                                <button class="symbol-btn">&#x25CE;</button>
                                <button class="symbol-btn">&#x25C7;</button>
                                <button class="symbol-btn">&#x25C6;</button>
                                <button class="symbol-btn">&#x25A1;</button>
                                <button class="symbol-btn">&#x25A0;</button>
                                <!-- 3줄 -->
                                <button class="symbol-btn">&#x25B3;</button>
                                <button class="symbol-btn">&#x25B2;</button>
                                <button class="symbol-btn">&#x25BD;</button>
                                <button class="symbol-btn">&#x25BC;</button>
                                <button class="symbol-btn">&#x25C1;</button>
                                <button class="symbol-btn">&#x25C0;</button>
                                <button class="symbol-btn">&#x25B7;</button>
                                <button class="symbol-btn">&#x25B6;</button>
                                <button class="symbol-btn">&#x2192;</button>
                                <button class="symbol-btn">&#x2190;</button>
                                <button class="symbol-btn">&#x2191;</button>
                                <button class="symbol-btn">&#x2193;</button>
                                <button class="symbol-btn">&#x2194;</button>
                                <button class="symbol-btn">&#x2195;</button>
                                <!-- 4줄 -->
                                <button class="symbol-btn">&#x2664;</button>
                                <button class="symbol-btn">&#x2660;</button>
                                <button class="symbol-btn">&#x2661;</button>
                                <button class="symbol-btn">&#x2665;</button>
                                <button class="symbol-btn">&#x300A;</button>
                                <button class="symbol-btn">&#x300B;</button>
                                <button class="symbol-btn">&#x266D;</button>
                                <button class="symbol-btn">&#x261C;</button>
                                <button class="symbol-btn">&#x261E;</button>
                                <button class="symbol-btn">&#x266C;</button>
                                <button class="symbol-btn">&#x327F;</button>
                                <button class="symbol-btn">&#x321C;</button>
                                <button class="symbol-btn">&#x260E;</button>
                                <button class="symbol-btn">&#x2668;</button>
                              </div>
                              <!-- //특수문자 입력 영역 -->
                            </td>
                          </tr>
                          <tr>
                            <th>수신 번호</th>
                            <td>
                              <div class="input-form w220">
                                <input type="text" id="receiverNumberInput" name="receiverNumber" placeholder="숫자만 입력해 주세요" value="" />
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <th>발신 번호</th>
                            <td>
                              <div class="input-form w220">
                                <input type="text" id="senderNumberInput" name="senderNumber" placeholder="숫자만 입력해 주세요" value="" />
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>
                  <div class="modal-footer">
                    <div class="d-flex gap-08">
                      <div class="col-auto">
                        <button type="button" class="btn btn-outline-dark NonRole">취소</button>
                      </div>
                      <div class="col">
                        <button type="button" class="btn btn-dark w100p updateBtn" onclick="alertPubTest3()">발송</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // SMS 발송 모달 -->

            <!-- AS 발행 모달 -->
            <div
              class="modal fade"
              id="asPublish"
              tabindex="-1"
              aria-labelledby="asPublishLabel"
              aria-hidden="true"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
            >
              <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="btn-closed" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body uiscroll">
                    <h1 class="modal-title" id="asPublishLabel">AS 발행</h1>
                    <section class="row"></section>
                  </div>
                  <div class="modal-footer notice-style">
                    <div class="d-grid">
                      <button type="button" class="btn" id="">확인</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- // AS 발행 모달 -->
          </div>
        </div>
        <!-- // contents -->
      </div>
      <!-- // container -->
    </div>
  </body>
  <script src="/assets/js/plugins/jquery-3.7.1.min.js"></script>
  <script src="/assets/js/plugins/bootstrap.bundle.min.js"></script>
  <script src="/assets/js/plugins/moment-with-locales.min.js"></script>
  <script src="/assets/js/plugins/tempusdominus-bootstrap-4.js"></script>
  <script src="/assets/js/plugins/swiper-bundle.min.js"></script>
  <script src="/assets/js/plugins/dataTables.min.js"></script>
  <script src="/assets/js/plugins/jstree.min.js"></script>
  <script src="/assets/js/common.js"></script>
  <script src="/js/common2.js"></script>
  <script src="/js/chart.umd.js"></script>
  <script>
    window.addEventListener("load", function () {
      var allElements = document.getElementsByTagName("*");
      Array.prototype.forEach.call(allElements, function (el) {
        var includePath = el.dataset.includePath;
        if (includePath) {
          var HTTP = new XMLHttpRequest();
          HTTP.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
              el.outerHTML = this.responseText;
            }
          };
          HTTP.open("GET", includePath, true);
          HTTP.send();
        }
      });

      // s : 퍼블 화면 테스트 스크립트
      $("#pubTable1").DataTable({
        autoWidth: false,
        searching: false,
        responsive: false,
        ordering: false,
        info: false,
        recordsTotal: false,
        language: {
          lengthMenu: "총 _TOTAL_ 건 _MENU_",
        },
        dom: "<'dt-container'lB>rtp",
        buttons: [
          {
            extend: "",
            text: "다운로드",
            className: "btn btn-ico btn-download",
            attr: {
              id: "downloadBtn",
            },
            action: function () {
              console.log("다운로드");
            },
          },
        ],
        initComplete: function () {
          // dt-button 버튼 초기화
          const dtButtons = document.querySelectorAll(".dt-container .dt-buttons .btn");
          dtButtons.forEach((button) => {
            button.classList.remove("dt-button");
          });

          // 셀렉트 로딩
          UI.isSelectCustom();

          // 추가 버튼 그룹
          const triggerGroupHTML = `
            <div class="dt-trigger-group d-flex">
              <div class="col-auto d-flex">
                <span class="custom-radio">
                  <input id="filterAll" name="todoStatusFilter" type="radio" value="all" checked />
                  <label for="filterAll" class="button">전체(420)</label>
                </span>
                <span class="custom-radio">
                  <input id="filterNotRegistered" name="todoStatusFilter" type="radio" value="notRegistered" />
                  <label for="filterNotRegistered" class="button">미등록(750)</label>
                </span>
                <span class="custom-radio">
                  <input id="filterContactRegistered" name="todoStatusFilter" type="radio" value="contactRegistered" />
                  <label for="filterContactRegistered" class="button">컨택 등록(55)</label>
                </span>
                <span class="custom-radio">
                  <input id="filterResultRegistered" name="todoStatusFilter" type="radio" value="resultRegistered" />
                  <label for="filterResultRegistered" class="button">결과 등록(78)</label>
                </span>
              </div>
              <div class="col-auto">
                <button type="button" class="btn btn-ico btn-notification" id="unprocessedStatusBtn">
                  <span>미처리현황 <i>25</i>건</span>
                </button>
              </div>
            </div>
          `;

          // dt-container
          const dtContainer = document.querySelector(".dt-container .dt-buttons");
          dtContainer.insertAdjacentHTML("beforebegin", triggerGroupHTML);

          // 라디오 클릭
          const radioButtons = document.querySelectorAll("input[name=todoStatusFilter]");
          radioButtons.forEach((radio) => {
            radio.addEventListener("change", (e) => {
              const val = e.target.value;
              switch (val) {
                case "all":
                  console.log("전체");
                  break;
                case "notRegistered":
                  console.log("미등록");
                  break;
                case "contactRegistered":
                  console.log("컨택등록");
                  break;
                case "resultRegistered":
                  console.log("결과등록");
                  break;
                default:
                  console.warn("Unknown filter:", val);
              }
            });
          });

          // 미처리현황 클릭
          const unprocessedStatusBtn = document.getElementById("unprocessedStatusBtn");
          unprocessedStatusBtn.addEventListener("click", () => {
            console.log("미처리현황");
          });
        },
      });

      const singleRow = {
        deliveryType: "택배",
        diskNumber: "123456789",
        diskType: "가입자개통타스크",
        status: "처리 중",
        taskName: "상품 변경",
        productName: "스마트기가_1G",
        serviceName: "U+인터넷",
        agencyName: "복구_개통-A지점",
        engineerName: "홍길동",
        requestTime: "2025-05-02 13:50",
      };
      const tableData2 = Array.from({ length: 50 }, (_, i) => ({
        ...singleRow,
        diskNumber: `${123456789 + i}`,
        engineerName: `홍길동${i + 1}`,
      }));

      $("#pubTable2").DataTable({
        autoWidth: false,
        searching: false,
        responsive: true,
        ordering: false,
        info: false,
        recordsTotal: false,
        lengthChange: false,
        paging: false,
        columns: [
          { data: "deliveryType", title: "택배/매" },
          { data: "diskNumber", title: "디스크 번호" },
          { data: "diskType", title: "디스크 구분" },
          { data: "status", title: "상태" },
          { data: "taskName", title: "작업명" },
          { data: "productName", title: "상품명" },
          { data: "serviceName", title: "서비스명" },
          { data: "agencyName", title: "대리점명" },
          { data: "engineerName", title: "담당기사" },
          { data: "requestTime", title: "요청 일시" },
        ],
        data: tableData2,
        drawCallback: function () {
          $("#pubTable2").on("click", "tbody tr", function () {
            var rowData = $("#pubTable2").DataTable().row($(this)).data();
            console.log(rowData);
          });
        },
      });

      window.alertPubTest = () => {
        var btn = event.target;
        var parent = btn.closest(".d-flex");
        var memoInput = parent ? parent.querySelector('[name="contactMemo"]') : null;
        if (memoInput && memoInput.value.trim() === "") {
          memoInput.focus();
          showAlert({
            image: "<img src='/assets/images/common/icon_info.svg' alt=''>",
            message: "컨택 메모를 입력해 주세요.",
            oneButton: true,
          });
        } else {
          showAlert({
            image: "<img src='/assets/images/common/icon_info.svg' alt=''>",
            message: "컨택 메모를 저장하시겠습니까?",
          });
        }
      };

      window.alertPubTest2 = () => {
        showAlert({
          image: "<img src='/assets/images/common/icon_info.svg' alt=''>",
          message: "SMS은 최대 5회까지만<br>발송 가능합니다",
        });
      };

      window.alertPubTest3 = () => {
        const receiverNumberInput = document.getElementById("receiverNumberInput").value;
        if (!receiverNumberInput) {
          showAlert({
            image: "<img src='/assets/images/common/icon_info.svg' alt=''>",
            message: "수신 번호를<br>입력해 주세요",
            oneButton: true,
          });
        } else if (receiverNumberInput) {
          if (!/^\d+$/.test(receiverNumberInput) || (receiverNumberInput.length !== 10 && receiverNumberInput.length !== 11)) {
            showAlert({
              image: "<img src='/assets/images/common/icon_info.svg' alt=''>",
              message: "수신 번호 확인 후<br>다시 입력해 주세요",
              oneButton: true,
            });
            return;
          }
        }
      };

      document.querySelectorAll(".sms-symbol-list .symbol-btn").forEach(function (btn) {
        btn.addEventListener("click", function () {
          const textarea = document.getElementById("smsContentInput");
          const symbol = btn.textContent;
          if (document.selection) {
            textarea.focus();
            let sel = document.selection.createRange();
            sel.text = symbol;
          } else if (textarea.selectionStart || textarea.selectionStart === 0) {
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const value = textarea.value;
            textarea.value = value.substring(0, start) + symbol + value.substring(end);
            textarea.selectionStart = textarea.selectionEnd = start + symbol.length;
            textarea.focus();
          } else {
            textarea.value += symbol;
            textarea.focus();
          }
        });
      });

      let lastProcessHistoryTrigger = null;
      let lastSmsSendTrigger = null;
      // 중간 처리 이력 버튼 이벤트
      document.querySelectorAll('[data-bs-target="#processHistory"]').forEach((btn) => {
        btn.addEventListener("click", function (e) {
          lastProcessHistoryTrigger = btn;
        });
      });
      // SMS 발송 버튼 이벤트
      document.querySelectorAll('[data-bs-target="#smsSend"]').forEach((btn) => {
        btn.addEventListener("click", function (e) {
          lastSmsSendTrigger = btn;
        });
      });
      // 모달 닫힐 때 이벤트
      const processHistoryModal = document.getElementById("processHistory");
      const smsSendModal = document.getElementById("smsSend");
      const ShowParentModal = (id) => {
        const parentModal = id.closest(".modal");
        if (parentModal && parentModal.id) {
          const modalEl = document.getElementById(parentModal.id);
          if (modalEl) {
            const modal = bootstrap.Modal.getOrCreateInstance(modalEl);
            modal.show();
          }
        }
      };
      // 중간 처리 이력
      processHistoryModal.addEventListener("hidden.bs.modal", function () {
        if (lastProcessHistoryTrigger) {
          ShowParentModal(lastProcessHistoryTrigger);
        }
      });
      // SMS 발송
      smsSendModal.addEventListener("hidden.bs.modal", function () {
        if (lastSmsSendTrigger) {
          ShowParentModal(lastSmsSendTrigger);
        }
      });

      const lnbActiveTest = () => {
        const lnbActive = lnb.querySelector(".depth1-link.today");
        if (lnbActive) {
          lnbActive.classList.add("active");
        }
      };
      setTimeout(() => {
        lnbActiveTest();
      }, 500);
      // e : 퍼블 화면 테스트 스크립트
    });
  </script>
</html>
